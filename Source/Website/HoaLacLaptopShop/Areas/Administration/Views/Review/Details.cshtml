@model ProductReview

<partial name="~/Areas/Administration/Views/Shared/_PageHeading.cshtml"
         model="@(new{ Heading = "Reviews", Subheading = $"{Model.ReviewerId}, {Model.ProductId}"})" />
<div>
    <div class="btn btn-danger" onclick="confirmDelete()"><i class="fa-solid fa-x"></i> Delete</div>
    <a class="btn btn-primary" asp-action="Index"><i class="fa-solid fa-arrow-left"></i> Back to List</a>
</div>
<hr />

<div>
    <div class="row">
        <div class="col-lg-3" style="margin-bottom: 30px;">
            <h1>Product</h1>
            <div style="display: inline-block ; vertical-align: top">
                <img id="product-main-img"
                     src="@Model.Product.ProductImages.FirstOrDefault()?.GetProductImageURL()"
                     style="width: 100px; vertical-align: top"
                     alt="" />
            </div>
            <div style="display: inline-block; margin-left: 10px; vertical-align: top">
                <div>
                    <strong>@Model.Product.Name</strong>
                </div>
                <div>
                    Brand: <strong>@Model.Product.Brand.Name</strong></i>
                </div>
                <div>
                    Average Rating: @Model.Product.AveargeRating.ToString("0.00") <i class="fa fa-star"></i>
                </div>
                <div>
                    Total Reviews: @Model.Product.ReviewCount
                </div>
            </div>
            <h1 style="margin-top: 30px;">Reviewer</h1>
            <div>Name: <strong>@Model.Reviewer.Name</strong></div>
            <div>Email: <strong>@Model.Reviewer.Email</strong></div>
            <div>Phone number: <strong>@Model.Reviewer.PhoneNumber</strong></div>
        </div>
        <div class="col-lg-9">
            <h1>Review</h1>
            <div>
                <span style="display: inline;">Review time: </span>
                <label style="display: inline;"><i class="fa-solid fa-clock"></i> <strong>@Model.ReviewTime</strong></label>
            </div>
            <div>
                <span style="display: inline;">Rating: </span>
                <span style="display: inline;">
                    <ul style="display: inline; padding: 0; margin: 0; list-style-type: none;">
                        @{
                            int i = 0;
                            for (i = 0; i < Model.Rating; i++)
                            {
                                <li style="display: inline;"><i class="fa fa-star"></i></li>
                            }
                            for (; i < 5; i++)
                            {
                                <li style="display: inline;"><i class="fa-regular fa-star"></i></li>
                            }
                        }
                    </ul>
                </span>
            </div>
            <div>
                <span style="display: inline;">Comment: </span>
                <p style="border: 1px solid black; min-height: 200px; border-radius: 5px; padding: 10px;">@Model.Content</p>
            </div>
        </div>
    </div>
</div>

<form id="form-delete" asp-action="Delete">
    <input type="hidden" name="rid" value="@Model.Reviewer.ID" />
    <input type="hidden" name="pid" value="@Model.Product.ID" />
</form>
@section Scripts
{
    <script>
        function confirmDelete()
        {
            if (confirm('Are you sure you want to delete this review?'))
            {
                $('#form-delete').submit();
            }
        }
    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}